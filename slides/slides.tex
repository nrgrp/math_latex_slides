\documentclass[usepdftitle=false]{beamer}

\usepackage{zhslides}
\input{defs.tex}

\title{Mathematical Writing and Typesetting in \LaTeX}
\author{Hao Zhu}
\institute{Department of Computer Science\\University of Freiburg}
\date{July 11, 2025}

\begin{document}
\begin{frame}[plain]
    \titlepage{}
\end{frame}

\begin{frame}
    \frametitle{About this talk}

    \begin{itemize}\itemsep=12pt
        \item guidelines for mathematical writing and typesetting in \LaTeX
        \item useful in general for writing papers; can be very useful if math statements and proofs are included
        \item list some geneal rules that I am trying to follow, specific to optimization field
        \item accompanied with a note which is more formal than the slides
        \item covers both the \LaTeX\ source as well as the output, \ie, the PDF, which is intended to be read alongside its own source
        \item all material available at \url{https://github.com/nrgrp/math_latex_slides}
        \item[] 
        \item the material was originally developed by Boyd~\etal~\cite{boyd2014latex} as guidelines for a course report
    \end{itemize}
\end{frame}

\section{General rules for mathematical typesetting}
\begin{frame}
    \frametitle{Some useful references}

    some famous guidelines for mathematical writing:
    \begin{itemize}\itemsep=6pt
        \item \cite{Halmos:1970}: Halmos, \emph{How to write mathematics}
        \item \cite{Knuth:1989}: Knuth~\etal, \emph{Mathematical Writing}
    \end{itemize}
    \vspace*{10pt}

    many respectable books follow similar rules, like
    \begin{itemize}\itemsep=6pt
        \item \cite{boyd2004convex}: Boyd and Vandenberghe, \emph{Convex Optimization}
        \item \cite{Cover:1991}: Cover and Thomas, \emph{Elements of Information Theory}
        \item \cite{Hastie:2001}: Hastie~\etal, \emph{The Elements of Statistical Learning}
        \item \cite{Sipser:2001}: Sipser, \emph{Introduction to the Theory of Computation}
        \item \cite{Cormen:2001}: Cormen~\etal, \emph{Introduction to Algorithms}
        \item \cite{Rudin:1976}: Rudin, \emph{Principles of Mathematical Analysis}
        \item \cite{Evans:2010}: Evans, \emph{Partial Differential Equations}
        \item \cite{Knuth:1973}: Knuth, \emph{The Art of Computer Programming, Volume I: Fundamental Algorithms}
    \end{itemize}
\end{frame}

\begin{frame}
    \frametitle{Precision of mathmatical statements}

    \begin{itemize}\itemsep=12pt
        \item the sentence
            \begin{quote}
                ``Let $x^\star$ be the solution to the optimization problem.''
            \end{quote}
            implicitly asserts that the solution is unique
        \item if the solution is not unique or need not be unique, write
            \begin{quote}
                ``Let $x^\star$ be a solution to the optimization problem.''
            \end{quote}
        \item[]
        \item similarly, do not refer to ``solving'' an expression, as this is meaningless
        \item we can solve an equation or set of equations, evaluate an expression or function, or check that an equation or inequality holds
    \end{itemize}
\end{frame}

\begin{frame}
    \frametitle{Punctuation in equations}

    \begin{itemize}\itemsep=10pt
        \item an equation is part of a sentence, so we may need to include a comma or a period at the end of an equation, whether or not inline or display math style is used
        \item an example for using a comma:
            \begin{quote}
                We next discuss how to solve the problem
                \[
                    \begin{array}{ll}
                        \mbox{minimize} & (1/2)\norm{Ax - b}_2^2,
                    \end{array}
                \]
                where $x \in \reals^n$ is the optimization variable.
            \end{quote}
        \item an example for using a period:
            \begin{quote}
                The objective function $f \colon \reals^n \to \reals$ is given by
                \[
                    f(x) = (1/2)\norm{Ax - b}_2^2,\quad x \in \reals^n.
                \]
            \end{quote}
        \item an example where no punctuation is needed:
            \begin{quote}
                The set
                \[
                    E = \{q \in \reals \mid q > 0,\ q^2 < 2\}
                \]
                has a supremum in $\reals$.
            \end{quote}
    \end{itemize}
\end{frame}

\begin{frame}
    \frametitle{Symbols in sentences}

    \begin{itemize}\itemsep=10pt
        \item don't start a sentence with a symbol since this hurts readability:
            \begin{quote}
                Bad: $f$ is smooth.\\
                Good: The function $f$ is smooth.

                Bad: $x^n - a$ has $n$ distinct zeros. \\
                Good: The polynomial $x^n - a$ has $n$ distinct zeros.
            \end{quote}
        \item use words to separate symbols in different formulas if it might confuse the reader visually or in the actual meaning of the sentence:
            \begin{quote}
                Bad: The sequences $x_1, x_2, \dots$, $y_1, y_2, \dots$ are Cauchy. \\
                OK: The sequences $x_1, x_2, \dots,$ and $y_1, y_2, \dots,$ are Cauchy. \\
                Good: The sequences $(x_i)$ and $(y_i)$ are Cauchy.

                OK: The image of $S$ under $f$, $f(S) = \{ x \mid x \in S \}$, is convex. \\
                Good: The image of $S$ under $f$, given by $f(S) = \{ x \mid x \in S \}$, is convex.
            \end{quote}
        \item do not insert superfluous words if the meaning is clear:
            \begin{quote}
                Good: Consider the function $f + g + h$, where $f \colon \reals^n \to \reals$, $g \colon \reals^m \to \reals$, and $h \colon \reals^p \to \symms^n$ are closed proper convex.
            \end{quote}
    \end{itemize}
\end{frame}

\begin{frame}
    \frametitle{English in math mode}

    \begin{itemize}\itemsep=12pt
        \item mathematical symbols should be typeset in math mode: write $Ax=b$, not \textrm{Ax=b}
        \item subscripts or superscripts that derive from English (or any human language) should not be italicized, for example, write $f_\mathrm{best}$, not $f_{best}$
        \item the exception is subscripts based on a single letter: refer to a point that is the center of some set as $x_c$, not $x_{\mathrm{c}}$
        \item similarly, use commands for special functions: use $\sin(x)$, $\log(x)$, and $\exp(x)$, not $sin(x)$, $log(x)$, or $exp(x)$
        \item[] 
        \item a really heinous example would be the following:
            \begin{quote}
                Consider the problem
                \[
                    \begin{array}{ll}
                        minimize & f(Ax - b) \\
                    \end{array}
                \]
                where x is the optimization variable and A and b are problem data.
            \end{quote}
    \end{itemize}
\end{frame}

\begin{frame}[fragile]
    \frametitle{Spacing}

    \begin{itemize}\itemsep=10pt
        \item a blank line ends a paragraph, so we shouldn't leave a blank line between an equation and the following text unless intending the equation to end the paragraph
        \item for example, in the \LaTeX\ source, write:
            \begin{quote}
                \begin{verbatim}
The image of $S$ under $f$,
\[
f(S) = \{ f(x) \mid x \in S \},
\]
is convex.
                \end{verbatim}
            \end{quote}\vspace*{-\baselineskip}
            inserting extra blank lines before \verb+\[+ or after \verb+\]+ will result in bad typesetting
        \item the following is fine, since a new paragraph is called for:
            \begin{quote}
                \begin{verbatim}
The image of $S$ under $f$ is defined as
\[
f(S) = \{ f(x) \mid x \in S \}.
\]

We now turn to a different topic.
                \end{verbatim}
            \end{quote}
    \end{itemize}
\end{frame}

\begin{frame}[fragile]
    \frametitle{Use the right commands}

    there are certain special commands in \LaTeX\ for notation that you otherwise might attempt to write in an ad-hoc manner, \eg,
    \begin{itemize}\itemsep=12pt
        \item norms: 
            \begin{quote}
                Bad: \verb+$||x||$+ ($\implies$ $||x||$)\\
                Good: \verb+$\|x\|$+ ($\implies$ $\|x\|$)
            \end{quote}
        \item set-builder and conditional probability notation:
            \begin{quote}
                Bad: \verb+$|$+ ($\implies$ $\{x \in \reals | x \geq 0 \}$)\\
                Good: \verb+$\mid$+ ($\implies$ $\{ x \in \reals \mid x \geq 0 \}$)
            \end{quote}
        \item functions:
            \begin{quote}
                Bad: \verb+$:$+ ($\implies$ $f: \reals^n \to \reals$)\\
                Good: \verb+$\colon$+ ($\implies$ $f \colon \reals^n \to \reals$)
            \end{quote}
        \item use \verb+\ldots+ (lower dots, $\ldots$) when the dots are surrounded by commas and \verb+\cdots+ (center dots, $\cdots$) when surrounded by other objects that have full height, as in
        \[
            x_1, x_2, \ldots, x_n\quad \mbox{and}\quad x_1 + x_2 + \cdots + x_n
        \]
    \end{itemize}
\end{frame}

\section{Mathematical notation and jargon}
\begin{frame}
    \frametitle{General guidelines (noncontroversial)}

    \begin{itemize}\itemsep=10pt
        \item don't use the same notation for two different things, \eg, don't say ``$A_j$ for $1 \leq j \leq n$'' in one place and ``$A_i$ for $i=1,\ldots,n$'' in another
        \item it can be useful to choose names for indices so, \eg, $i$ always varies from $1$ to $m$ and $j$ always varies from $1$ to $n$
        \item define all symbols before or near to where you use them
        \item a symbol like $f$ refers to a function, while $f(x)$ refers to a function evaluated at a given point
            \begin{itemize}
                \item avoid sloppy writing like ``The function $f(x)$ is convex.''
                \item `anonymous' functions defined inline are an exception to this rule, as in ``The function $x^2 \cos x$ is a counterexample.''
            \end{itemize}
        \item try to use mnemonic notation, so $x_c$ for a center point, $c$ for a cost vector, $S$ for a generic set, $C$ for a convex set, $B$ for a ball, and so on
        \item don't use symbols like $\forall$, $\exists$, and $\implies$; use the corresponding words; these symbols are usually appropriate only in formal logic
    \end{itemize}
\end{frame}

\begin{frame}[t,fragile]
    \vspace*{1cm}

    \begin{itemize}\itemsep=10pt
        \item don't assign symbols to concepts that you never refer to, or can easily refer to without the symbol:
            \begin{quote}
                Bad: Let $X$ be a compact subset of a space $Y$. 
                If $f$ is a continuous real-valued function over $X$, it has a minimum over $X$. \\
                Good: A continuous real-valued function has a minimum over a compact set.
            \end{quote}
        similarly, do not say
        \begin{quote}
            ``The solution $x^\star$ is unique.''
        \end{quote}
        if we never need to refer to $x^\star$ again
        \item do not write `arg min' (and `arg max') since `argmin' is a single mathematical operator (which is different from $\liminf$ and $\limsup$)
            \begin{quote}
                Very Bad: Let $\displaystyle x = \text{arg} \min_u \left(f(u) + \frac{1}{2}\norm{u - z}_2^2\right)$.\\
                Bad: Let $\displaystyle x = \mathop{\text{arg min}}_u \left(f(u) + \frac{1}{2}\norm{u - z}_2^2\right)$.\\
                Good: Let $\displaystyle x = \mathop{\rm argmin}_u \left(f(u) + \frac{1}{2}\norm{u - z}_2^2\right)$.
            \end{quote}
    \end{itemize}

\end{frame}

\begin{frame}[fragile]
    \frametitle{Symbols for some specific sets (controversial)}

    \begin{itemize}\itemsep=10pt
        \item it is common in analysis textbooks to use the bold face capital letters to represent some specific sets, \eg,
            \begin{itemize}
                \item $\nats$: the set of natural numbers
                \item $\rats$: the set of rational numbers
                \item $\ints$: the set of integers
                \item $\reals$: the set of real numbers
                \item $\symms^n$: the set of $n \times n$ symmetric matrices
            \end{itemize}
            the corresponding \LaTeX\ macro is \verb+\mathbf{}+ (`\texttt{bf}' stands for \emph{bold face})
        \item recent years, people start to accept the blackboard bold face capital letters instead, \eg, $\mathbb{N}$, $\mathbb{Q}$, $\mathbb{Z}$, $\mathbb{R}$, $\mathbb{S}^n$; the corresponding \LaTeX\ macro is \verb+\mathbb{}+ (`\texttt{bb}' stands for \emph{blackboard bold})
        \item now we can choose to use either of them are as long as they are consistent in the same document; a bad example would be the following
            \begin{quote}
                Bad: The set
                \[
                    E = \{q \in \mathbb{Q} \mid q > 0,\ q^2 < 2\}
                \]
                has no supremum in $\mathbb{Q}$, but has a supremum in $\reals$.
            \end{quote}
    \end{itemize}

\end{frame}

\begin{frame}
    \frametitle{Writing optimization problems (controversial)}

    Rockafellar wrote optimization problems around 70s in his famous \emph{Convex Analysis} book~\cite{rockafellar1970convex} as follows:
    \begin{quote}
        Consider the problem
        \begin{equation}\label{prob:opt}
            \begin{array}{ll}
                \mbox{minimize}   & (1/2)\norm{Ax-b}_2^2 + \lambda \norm{x}_1 \\
                \mbox{subject to} & 0 \preceq x \preceq \mathbf{1} \\
                & \norm{x}_2 \leq 1,
            \end{array}
        \end{equation}
        where $x \in \reals^n$ is the optimization variable, and $A \in \reals^{m \times n}$, $b \in \reals^m$, and $\lambda > 0$ are problem data.
    \end{quote}
    \begin{itemize}\itemsep=12pt
        \item the words `minimize' and `subject to' are considered as key \emph{words} for instantiating an optimization problem
        \item it is always important to state which symbols refer to variables and which to problem data
    \end{itemize}
\end{frame}

\begin{frame}[t]
    \vspace*{1cm}

    sometimes for saving space, the problem (\ref{prob:opt}) can be abbreviated as follows:
    \begin{quote}
        Consider the problem
        \begin{equation}\label{prob:opt_min}
            \begin{array}{ll}
                \mbox{min.}   & (1/2)\norm{Ax-b}_2^2 + \lambda \norm{x}_1 \\
                \mbox{s.t.} & 0 \preceq x \preceq \mathbf{1}\\
                & \norm{x}_2 \leq 1,
            \end{array}
        \end{equation}
        where $x \in \reals^n$ is the optimization variable, and $A \in \reals^{m \times n}$, $b \in \reals^m$, and $\lambda > 0$ are problem data.
    \end{quote}
    \begin{itemize}
        \item note the period after `min', which says that `min.' is the shorthand for `minimize', instead of the $\min$ operator which is \emph{only} defined for a finite set as
            \[
                \min \{x_1, \ldots, x_n\} = x_k \ \mbox{such that}\ x_k \leq x_i\ \mbox{for all $i = 1, \ldots, n$}
            \]
    \end{itemize}
    \vspace*{10pt}

    more recently, people often integrate the sentence for specifying the variable and data into the definition of the problem, \eg, for the problem (\ref{prob:opt}) and (\ref{prob:opt_min}):
    \begin{quote}
        Consider the problems
        \[
            \begin{array}{ll}
                \underset{x \in \reals^n}{\mbox{minimize}}   & (1/2)\norm{Ax-b}_2^2 + \lambda \norm{x}_1 \\
                \mbox{subject to} & 0 \preceq x \preceq \mathbf{1} \\
                & \norm{x}_2 \leq 1
            \end{array}\quad \mbox{and}\quad
            \begin{array}{ll}
                \underset{x \in \reals^n}{\mbox{min.}}   & (1/2)\norm{Ax-b}_2^2 + \lambda \norm{x}_1 \\
                \mbox{s.t.} & 0 \preceq x \preceq \mathbf{1}\\
                & \norm{x}_2 \leq 1.
            \end{array}
        \]
    \end{quote}
\end{frame}

\begin{frame}[t]
    \vspace*{1cm}

    while avoiding the period after `min.' for writing optimization problems is extremely widely accepted by people in various fields, I personally consider it to be sloppy math:
        \begin{quote}
        Let $f, g \colon \reals^n \to \reals$, and consider the problem
        \[
            \begin{array}{ll}
                \underset{x \in \reals^n}{\min}   & \min \{f(x), g(x)\} \\
                \mbox{s.t.} & 0 \preceq x \preceq \mathbf{1}.
            \end{array}
        \]
    \end{quote}
    \begin{itemize}\itemsep=12pt
        \item in the above example, two different meanings are assigned to the three ASCII letters `min':
            \begin{itemize}\itemsep=6pt
                \item the first `min' is the key word for instantiating a minimization problem
                \item the second `min' is the operator of taking the smallest element of a finite set
            \end{itemize}
        \item the \LaTeX\ package \texttt{optidef} can be very useful in writing optimization problems in this style, especially when handling lots of constraints
    \end{itemize}
\end{frame}

\section{Miscellaneous comments}
\begin{frame}[fragile]
    \frametitle{Sentence-ending periods}

    \begin{itemize}\itemsep=12pt
        \item \LaTeX\ assumes all periods followed by a space are sentence-ending periods
        \item tell it otherwise when that is not the case
        \item for example:
            \begin{quote}
                Bad: \verb+Let $x_1,x_2,\ldots ,x_n$ be i.i.d. normal random variables.+\\
                \quad $\implies$ Let $x_1,x_2,\ldots ,x_n$ be i.i.d. normal random variables.\\
                Good: \verb+Let $x_1,x_2,\ldots ,x_n$ be i.i.d.\ normal random variables.+\\
                \quad $\implies$ Let $x_1,x_2,\ldots ,x_n$ be i.i.d.\ normal random variables.
            \end{quote}
    \end{itemize}
\end{frame}

\begin{frame}[fragile]
    \frametitle{Commas}

    \begin{itemize}
        \item know when commas should appear inside or outside math environments:
            \begin{quote}
                Bad: \verb+Note that $a,b,$ and $c$ are nonnegative.+\\
                \quad $\implies$ Note that $a,b,$ and $c$ are nonnegative.\\
                Good: \verb+Note that $a$, $b$, and $c$ are nonnegative.+\\
                \quad $\implies$ Note that $a$, $b$, and $c$ are nonnegative.

                Bad: \verb+We conclude that $x_1$, $x_2$, \dots, $x_n$ are decreasing.+\\
                \quad $\implies$ We conclude that $x_1$, $x_2$, \dots, $x_n$ are decreasing.\\
                Good: \verb+We conclude that $x_1, x_2, \ldots, x_n$ is decreasing.+\\
                \quad $\implies$ We conclude that $x_1, x_2, \ldots, x_n$ is decreasing.
            \end{quote}
    \end{itemize}
\end{frame}

\begin{frame}[fragile]
    \frametitle{Quotes}

    \begin{itemize}
        \item use \verb+`'+ and \verb+``''+, instead of \verb+''+ and \verb+""+ to type quotes, so that the left and right quote symbols are rendered correctly
            \begin{quote}
                Bad: "This is a bad example containing 'quotes' in a sentence".\\
                Good: ``The `quotes' in this sentence is good now.''
            \end{quote}
    \end{itemize}
\end{frame}

\begin{frame}
    \frametitle{Dialects}

    \begin{itemize}\itemsep=12pt
        \item be aware when writing in mathematical dialect, \eg, in statistics, machine learning, signal processing, control, vision, information theory, and so on
        \item unless the intended audience is only from this one field, try to avoid using dialect
        \item try to write in such a way that a general reader with a good understanding of basic mathematics can understand what we are saying
        \item[] 
        \item use standard variable notation unless otherwise needed: $x$ for variables, $A$ for matrices, and so on
        \item a bad example would be to use
            \[
                \Xi \beta = \chi
            \]
            for a system of linear equations, unless it is really needed
    \end{itemize}
\end{frame}

\begin{frame}
    \frametitle{No rule is absolute}

    \begin{itemize}
        \item break any of these rules rather than write anything nasty
    \end{itemize}

\end{frame}

\begin{frame}
    \frametitle{A bad example}

    \begin{itemize}
        \item if you are interested in reading a really bad example document where almost all the rules mentioned before are violated, I can send you my master's thesis and the corresponding \LaTeX\ source code
    \end{itemize}

\end{frame}

\begin{frame}[plain,allowframebreaks]{Reference}
    \small
    \bibliography{refs}
\end{frame}
\end{document}